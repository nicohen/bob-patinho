<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<head>
<link rel="stylesheet" type="text/css"
	href="style/self_managment_web.css" />
</head>

<body>

<f:view>
	<f:loadBundle basename="messages" var="msg" />
	<h:form id="graphicForm">

		<h:outputText value="Nombre: " /><h:outputText value="#{graficBean.agentName}" /><br />
		<h:outputText value="Fecha: " /><h:outputText value="#{graficBean.today}" /><br />
		<h:outputText value="Campaña: " /><h:outputText value="#{graficBean.currentCampaign}" /><br />
		<h:outputText value="Sueldo Fijo: $" /><h:outputText value="#{graficBean.sueldoFijo}" /><br />
		<h:outputText value="Sueldo Variable Proyectado: $" /><h:outputText value="#{graficBean.sueldoFijo}" /><br />
		<br />
		
		<table border="1" class="dr-table rich-table" align="center">
            <thead class="dr-table-thead">
                <tr class="dr-table-header rich-table-header">
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="Nivel de Logro" /></th>
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="Optimo" /></th>
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="Objetivo" /></th>
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="Minimo" /></th>
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="No Satisfactorio" /></th>
                </tr>
            </thead>
            <tbody>
                <a4j:repeat value="#{graficBean.metrics}" var="metric">
                    <tr>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="#{metric.pk.metric}" />
                        </td>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="#{metric.optim}" />
                        </td>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="#{metric.objective}" />
                        </td>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="#{metric.minimum}" />
                        </td>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="#{metric.unsatisfactory}" />
                        </td>
                    </tr>
                </a4j:repeat>
            </tbody>
        </table>

		<table border="1" class="dr-table rich-table" align="center">
            <thead class="dr-table-thead">
                <tr class="dr-table-header rich-table-header">
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="Métricas" /></th>
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="% a la Fecha actual" /></th>
                    <th class="dr-table-headercell rich-table-headercell"><h:outputText value="% proyectado" /></th>
                </tr>
            </thead>
            <tbody>
                <a4j:repeat value="#{graficBean.metrics}" var="metric">
                    <tr>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="#{metric.pk.metric}" />
                        </td>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="1" />
                        </td>
                        <td align="center" class="dr-subtable-cell rich-subtable-cell">
                            <h:outputText value="2" />
                        </td>
                    </tr>
                </a4j:repeat>
            </tbody>
        </table>
		
		<br />
		
		<a4j:mediaOutput element="img" cacheable="false" session="true"
			createContent="#{graficBean.generaGrafico}" mimeType="image/jpeg" />
	</h:form>

	<a4j:status id="status" onstart="#{rich:component('wait')}.show()"
		onstop="#{rich:component('wait')}.hide()" />


	<rich:modalPanel id="wait" autosized="true" width="32" height="32"
		moveable="false" resizeable="false">
		<h:graphicImage value="/images/Busy-icon.gif" />
	</rich:modalPanel>
</f:view>

</body>
</html>