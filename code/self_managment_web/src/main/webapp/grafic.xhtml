<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<head>
<link rel="stylesheet" type="text/css"
	href="style/self_managment_web.css" />
</head>

<ui:composition template="/template.xhtml">
	<ui:define name="body">

		<f:view>
			<f:loadBundle basename="messages" var="msg" />
			<h:form id="graphicForm">

				<h:outputText value="Nombre: " />
				<h:outputText value="#{graficBean.currentAgent.name}" />
				<br />
				<h:outputText value="Fecha: " />
				<h:outputText value="#{graficBean.today}" />
				<br />
				<h:outputText value="Campaña: " />
				<h:outputText value="#{graficBean.currentAgent.campaign.name}" />
				<br />
				<h:outputText value="Sueldo Fijo: $" />
				<h:outputText value="#{graficBean.sueldoFijo}" />
				<br />
				<h:outputText value="Sueldo Variable Proyectado: $" />
				<h:outputText value="#{graficBean.sueldoVariableProyectado}" />
				<br />
				<h:outputText value="Sueldo Horas Extra: $" />
				<h:outputText value="#{graficBean.sueldoHorasExtra}" />
				<br />
				<h:outputText value="Sueldo Total Proyectado: $" />
				<h:outputText value="#{graficBean.sueldoTotalProyectado}" />
				<br />
				<br />

				<table border="1" class="dr-table rich-table" align="center">
					<thead class="dr-table-thead">
						<tr class="dr-table-header rich-table-header">
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Nivel de Logro" /></th>
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Optimo" /></th>
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Objetivo" /></th>
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Minimo" /></th>
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="No Satisfactorio" /></th>
						</tr>
					</thead>
					<tbody>
						<a4j:repeat value="#{graficBean.metrics}" var="metric">
							<tr>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="#{metric.pk.metric}" /></td>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="#{metric.pk.metric.optimSign}" /><h:outputText
									value="#{metric.optim}" /><h:outputText
									value="#{metric.pk.metric.unit}" /></td>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="#{metric.pk.metric.objetiveSign}" /><h:outputText
									value="#{metric.objective}" /><h:outputText
									value="#{metric.pk.metric.unit}" /></td>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="#{metric.pk.metric.minimumSign}" /><h:outputText
									value="#{metric.minimum}" /><h:outputText
									value="#{metric.pk.metric.unit}" /></td>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="#{metric.pk.metric.unsatisfactorySign}" /><h:outputText
									value="#{metric.unsatisfactory}" /><h:outputText
									value="#{metric.pk.metric.unit}" /></td>
							</tr>
						</a4j:repeat>
					</tbody>
				</table>
				<br />
				<table border="1" class="dr-table rich-table" align="center">
					<thead class="dr-table-thead">
						<tr class="dr-table-header rich-table-header">
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Métricas" /></th>
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Fecha actual" /></th>
							<th class="dr-table-headercell rich-table-headercell"><h:outputText
								value="Proyectado" /></th>
						</tr>
					</thead>
					<tbody>
						<a4j:repeat value="#{graficBean.metrics}" var="metric">
							<tr>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="#{metric.pk.metric}" /></td>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText binding="#{graficBean.metricOutput}"
									value="#{graficBean.metricValue}">
									<f:attribute name="metric" value="#{metric}" />
								</h:outputText></td>
								<td align="center" class="dr-subtable-cell rich-subtable-cell">
								<h:outputText value="1" /></td>
							</tr>
						</a4j:repeat>
					</tbody>
				</table>

				<br />

				<a4j:mediaOutput element="img" cacheable="false" session="true"
					createContent="#{graficBean.generaGrafico}" mimeType="image/jpeg" />
			</h:form>

			<a4j:status id="status" onstart="#{rich:component('wait')}.show()"
				onstop="#{rich:component('wait')}.hide()" />


			<rich:modalPanel id="wait" autosized="true" width="32" height="32"
				moveable="false" resizeable="false">
				<h:graphicImage value="/images/Busy-icon.gif" />
			</rich:modalPanel>
		</f:view>

	</ui:define>
</ui:composition>
</html>