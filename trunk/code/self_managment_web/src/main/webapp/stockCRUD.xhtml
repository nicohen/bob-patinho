<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
<body>
<ui:composition template="/template.xhtml">
	<ui:define name="body">
		<f:view>
			<f:loadBundle basename="messages" var="msg" />
			<h:form id="form">
				<rich:dataTable id="grid" width="500" rows="10" var="stock"
					value="#{stockBean.stocks}">
					<f:facet name="header">
						<h:panelGroup>
							<a4j:commandLink ajaxSingle="true" id="LnkNew"
								action="#{stockBean.create}"
								oncomplete="#{rich:component('editPanel')}.show()">
								<h:graphicImage value="/images/Add-icon.png" style="border:0" />
							</a4j:commandLink>
							<rich:toolTip for="LnkNew" value="New" />
							<h:outputText value="Stock" />
						</h:panelGroup>
					</f:facet>
					<rich:column width="200">
						<f:facet name="header">
							<h:outputText value="Code" />
						</f:facet>
						<h:outputText value="#{stock.stockCode}" />
					</rich:column>
					<rich:column width="250">
						<f:facet name="header">
							<h:outputText value="Name" />
						</f:facet>
						<h:outputText value="#{stock.stockName}" />
					</rich:column>
					<rich:column width="50" style="text-align:center">
						<f:facet name="header">
							<h:outputText value="Action" />
						</f:facet>
						<a4j:commandLink ajaxSingle="true" id="LnkEdit"
							oncomplete="#{rich:component('editPanel')}.show()">
							<h:graphicImage value="/images/Edit-icon.png" style="border:0" />
							<f:setPropertyActionListener value="#{stock}"
								target="#{stockBean.stock}" />
						</a4j:commandLink>
						<rich:toolTip for="LnkEdit" value="Edit" />

						<a4j:commandLink ajaxSingle="true" id="LnkDelete"
							oncomplete="#{rich:component('deletePanel')}.show()">
							<h:graphicImage value="/images/Delete-icon.png" style="border:0" />
							<f:setPropertyActionListener value="#{stock}"
								target="#{stockBean.stock}" />
						</a4j:commandLink>
						<rich:toolTip for="LnkDelete" value="Delete" />
					</rich:column>
					<f:facet name="footer">
						<rich:datascroller for="grid" maxPages="15" reRender="grid" />
					</f:facet>
				</rich:dataTable>
			</h:form>

			<rich:modalPanel id="editPanel" autosized="true" width="300">
				<f:facet name="header">
					<h:outputText value="Stock" />
				</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/images/Button-X-icon.gif" id="LnkClose"
							style="cursor:pointer" />
						<rich:componentControl for="editPanel" attachTo="LnkClose"
							operation="hide" event="onclick" />
					</h:panelGroup>
				</f:facet>
				<h:form>
					<rich:messages style="color:red;" />
					<h:panelGrid columns="1">
						<a4j:outputPanel ajaxRendered="true">
							<h:panelGrid columns="2">
								<h:outputText value="Code" />
								<h:inputText value="#{stockBean.stock.stockCode}" size="25"
									maxlength="10" required="true" label="Code" />
								<h:outputText value="Name" />
								<h:inputText value="#{stockBean.stock.stockName}" size="25"
									maxlength="20" required="true" label="Name" />
							</h:panelGrid>
						</a4j:outputPanel>
						<h:panelGrid columns="4">
							<a4j:commandLink id="LnkUpdate" reRender="grid, status"
								action="#{stockBean.update}"
								oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('editPanel')}.hide();">
								<h:graphicImage value="/images/Button-Save-icon.png"
									style="border:0" />
							</a4j:commandLink>
							<rich:toolTip for="LnkUpdate" value="Save" />

							<a4j:commandLink id="LnkCancel"
								onclick="#{rich:component('editPanel')}.hide(); return false;">
								<h:graphicImage value="/images/Button-Close-icon.png"
									style="border:0" />
							</a4j:commandLink>
							<rich:toolTip for="LnkCancel" value="Cancel" />
						</h:panelGrid>
					</h:panelGrid>
				</h:form>
			</rich:modalPanel>

			<rich:modalPanel id="deletePanel" autosized="true" width="150">
				<f:facet name="header">
					<h:outputText value="Are you sure?" style="padding-right:15px;" />
				</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/images/Button-X-icon.gif" id="LnkClose2"
							style="cursor:pointer" />
						<rich:componentControl for="deletePanel" attachTo="LnkClose2"
							operation="hide" event="onclick" />
					</h:panelGroup>
				</f:facet>
				<h:form>
					<h:panelGrid columns="2">
						<a4j:commandButton value="Delete" action="#{stockBean.delete}"
							ajaxSingle="true"
							oncomplete="#{rich:component('deletePanel')}.hide();"
							reRender="grid, status" />
						<a4j:commandButton value="Cancel"
							onclick="#{rich:component('deletePanel')}.hide(); return false;" />
					</h:panelGrid>
				</h:form>
			</rich:modalPanel>

			<a4j:status id="status" onstart="#{rich:component('wait')}.show()"
				onstop="#{rich:component('wait')}.hide()" />


			<rich:modalPanel id="wait" autosized="true" width="32" height="32"
				moveable="false" resizeable="false">
				<h:graphicImage value="/images/Busy-icon.gif" />
			</rich:modalPanel>
		</f:view>
	</ui:define>
</ui:composition>
</body>
</html>